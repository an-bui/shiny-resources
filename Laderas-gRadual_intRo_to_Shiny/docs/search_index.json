[
["index.html", "A gRadual intRoduction to Shiny 1 Preface 1.1 Workshop Expectations 1.2 Learning Objectives", " A gRadual intRoduction to Shiny Ted Laderas and Jessica Minnier 2019-06-23 1 Preface 1.1 Workshop Expectations We want to foster a positive learning environment in this workshop. We expect everyone to adhere to the Code of Conduct. In short, be respectful of each other’s learning styles, don’t be dismissive or mean to someone who knows less than you, and try to help people if you see them struggle and you can help. We will enforce this and ask you to leave if you are not respectful to others. Additionally, please work together! The people in my workshops who have a really bad time and don’t get anything out of it are the ones who try to do it alone. To quote Legend of Zelda, “It’s dangerous to go alone”. Talking through the material with someone will help you understand it. We also are giving people post-it notes. Put them on your laptops so we can identify you if you need help or not. Yellow means “I’m okay, I’m done, don’t bug me”, Red means “I need some help!”. 1.2 Learning Objectives By the end of this workshop, you should be able to: Browse examples in the shiny gallery and understand how they work. Understand the components of a Shiny app and how they communicate., Learn three basic design patterns to the shiny apps. "],
["introduction.html", "2 Introduction 2.1 Setup (On RStudio Cloud) 2.2 Setup (On your Computer) 2.3 Introducing Shiny 2.4 Functions in R 2.5 The concept of ui and server elements", " 2 Introduction 2.1 Setup (On RStudio Cloud) If you’re running this workshop on RStudio Cloud, you will need to register for an RStudio Cloud account and then join the invite. This will be provided in the workshop. You will not need to download anything on the cloud instance. 2.2 Setup (On your Computer) Make sure that you have the following packages installed: install.packages(c(&quot;shiny&quot;, &quot;tidyverse&quot;, &quot;fivethirtyeight&quot;, &quot;plotly&quot;)) Clone or download the tutorial from here (click the Clone or Download button, it’s green and on the right side): https://github.com/laderast/gradual_shiny Unzip, and open the gradual_shiny.Rproj file in this folder. The project should open in RStudio and you should be ready! 2.3 Introducing Shiny Welcome to Shiny! Shiny is a framework in R for making interactive visualizations for the web created by Joe Cheng. Nearly any plot in R can be made into an interactive visualization by adding some simple interface elements and mapping these interface elements into the plot. It’s an extremely powerful technique for visualization and communication of findings. Before we get started, we need to talk a little bit about the architecture of shiny apps. shiny apps are server-based, which means that all of the calculations and plot rendering happen on a server (when you’re running them in RStudio, your server is your computer). Compare this to JavaScript visualization frameworks such as D3.js, where the client’s computer needs to do all of the computing of the visualization. There are a lot of benefits to server-based frameworks, namely that your users don’t need to have a heavy-duty computer to visit your site, and that your data is sitting behind a protected server. One of the difficulties is that it can be difficult to scale for lots of users. 2.4 Functions in R In order to use Shiny we need to have an understanding of R code syntax and how to use functions in R. Functions take an argument (input) and produce a result (output). A simple function is mean(). The input argument is a numeric vector such as c(1,5,3.2,0.001) and the output is a numeric value that is the mean of the vector. mean(x = c(1,5,3.2,0.001)) Note we could also not specify the name of the argument since R uses the inputs as arguments in the order it sees them. mean(c(1,5,3.2,0.001)) To see what arguments the function mean() requires, try looking it up in help: ?mean We can see that mean() takes optional arguments trim and na.rm. Compare the output from these two uses of mean(): mean(x = c(1,2,NA)) mean(x = c(1,2,NA), na.rm = TRUE) The NA value signifies missing data in R. The addition of other arguments changes how the function is used. 2.4.1 Writing our own functions In Shiny, we will use functions such as fluidPage() and shinyApp(). We will also create our own function server(). To define functions, the syntax is: name_of_function &lt;- function(input) { # code } For example: myfunction &lt;- function(a, b, div = 2) { (a + b)/div } Here, we must specify the inputs a and b and optionally div. Now we can use our function: myfunction(a = 3, b = 4) myfunction(a = 3, b = 4, div = 1) If we just type myfunction R prints the definition of our function. For more information on functions, see Advanced R book’s chapter on functions. 2.5 The concept of ui and server elements Every shiny app has two elements. The first is ui, which handles both the user controls and the layout and placement of output elements, such as plots or tables. ui usually consists of a layout scheme, with user controls (such as sliders, select boxes, radio boxes, etc) specified here. The second element is server, which handles all of the calculations and the generation of plots for ui. ui and server are only connected by two objects input, and output (they actually are environments, but we’ll just say they are objects). ui puts the values from the controls into input, which can be accessed by server. For example, if we have a slider called year_release in ui, we can access the value of that slider in server through input$year_release. server will then do something with the slider value and generate some output. Where does it put the output? If you guessed output, then give yourself a star! ui then takes output and will then display it using the various _Output functions (such as plotOutput, textOutput andtableOutput). If this is confusing, go very carefully through the diagram below. I’m happy to answer any questions you have about it. Basic shiny architecture "],
["app-1-connecting-ui-and-server.html", "3 App 1: Connecting ui and server 3.1 Making a ggplot interactive 3.2 Exercise 3.3 More about Inputs and Outputs 3.4 What you’ve learned so far 3.5 For More Info", " 3 App 1: Connecting ui and server Basic shiny architecture We’ll be taking two simple ggplot2 graphs and turning them into part of an interactive dashboard. The data we’re going to use is the biopics dataset from the fivethirtyeight package. 3.1 Making a ggplot interactive The first visualization is a scatterplot visualizing the total box_office by year_release, colored by type_of_subject. For the interactive portion, we’re going to color each point by different categories. Notice we use aes_string() to map columns to aesthetics. This is important, since we’ll be passing character arguments to modify this plot later. library(tidyverse) library(fivethirtyeight) data(biopics) biopics %&gt;% ggplot(aes_string(y=&quot;box_office&quot;, x=&quot;year_release&quot;, color = &quot;type_of_subject&quot;)) + geom_point() 3.2 Exercise Open the 01_app_basics folder and open the app.R file. This is the file for the Shiny App and we’ll modify it. Look at the structure of the code. There are two objects that we define: ui and server. We make them into an app with the command shinyApp(ui = ui, server = server). Take a look at the server code. Notice where our ggplot2 code is. Both graphs are placed in a renderPlot() function, and we give them a place in output, so ui can “see” it. The scatterplot is named output$scatter_plot and the boxplot is named output$boxoffice_boxplot. Take a look at the ui code. Where in the code are we displaying scatter_plot and boxoffice_boxplot? Notice we don’t need to refer to output. The display function plotOutput knows to look in the output object. Run the code by clicking the “Run App” button on the top of code window. You can see that we output our graphs in the “main” window. Let’s paste in a control. Paste the following code where it says “Add User Interface Element here” in app.R. If you run the app again, you should see a control, but it doesn’t change the plot. selectInput(&quot;color_opts&quot;, &quot;Select Category to Color With&quot;, choices = select_color_options) Let’s connect the control to the plot. Change the color aesthetic to the following: color = input$color_opts Now try running the app. Your select box should control what categorical data controls the color of the points. Try it out! Bonus! Let’s add in another category option. Where should you add it? Just in case, here are the column names and their data types. You probably shouldn’t add title, director, subject, lead_actor_actress since they aren’t really categories, and they will blow up your ggplots. glimpse(biopics) ## Observations: 761 ## Variables: 14 ## $ title &lt;chr&gt; &quot;10 Rillington Place&quot;, &quot;12 Years a Slave&quot;, ... ## $ site &lt;chr&gt; &quot;tt0066730&quot;, &quot;tt2024544&quot;, &quot;tt1542344&quot;, &quot;tt2... ## $ country &lt;chr&gt; &quot;UK&quot;, &quot;US/UK&quot;, &quot;US/UK&quot;, &quot;Canada&quot;, &quot;US&quot;, &quot;US... ## $ year_release &lt;int&gt; 1971, 2013, 2010, 2014, 1998, 2008, 2002, 2... ## $ box_office &lt;dbl&gt; NA, 5.67e+07, 1.83e+07, NA, 5.37e+05, 8.12e... ## $ director &lt;chr&gt; &quot;Richard Fleischer&quot;, &quot;Steve McQueen&quot;, &quot;Dann... ## $ number_of_subjects &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 3, 3, 3... ## $ subject &lt;chr&gt; &quot;John Christie&quot;, &quot;Solomon Northup&quot;, &quot;Aron R... ## $ type_of_subject &lt;chr&gt; &quot;Criminal&quot;, &quot;Other&quot;, &quot;Athlete&quot;, &quot;Other&quot;, &quot;O... ## $ race_known &lt;chr&gt; &quot;Unknown&quot;, &quot;Known&quot;, &quot;Unknown&quot;, &quot;Known&quot;, &quot;Un... ## $ subject_race &lt;chr&gt; NA, &quot;African American&quot;, NA, &quot;White&quot;, NA, &quot;A... ## $ person_of_color &lt;lgl&gt; FALSE, TRUE, FALSE, FALSE, FALSE, TRUE, FAL... ## $ subject_sex &lt;chr&gt; &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Ma... ## $ lead_actor_actress &lt;chr&gt; &quot;Richard Attenborough&quot;, &quot;Chiwetel Ejiofor&quot;,... 3.3 More about Inputs and Outputs As you start to program Shiny apps, you’ll need to know the different kinds of inputs and the different kinds of outputs. This is a quick tour of the various types. 3.3.1 Interactive control tools (from UI to server) In the above image, the UI uses a function selectInput() to allow the user to interactively select the color variable. In the server, this selected color is called input$color_var. This function selectInput() creates a box with choices for the user to select from. There are amny types of selecting tools, including drop down menus, checkboxes, radio buttons, numeric sliders, text input, etc. They all have their own function and they all require an argument id= which tells the server what the input is named. A list of useful control functions can be found below (a more complete list with examples is in shiny.rstudio.com lesson 3): function tool or widget description actionButton action button checkboxInput checkbox input, multiple options allowed fileInput file upload numericInput numeric value input radioButtons radio buttons where only one option is allowed selectInput a box that a user can type into and choose from choices sliderInput a slider bar textInput text/string input 3.3.2 Display output (from server to UI) In our above example, the server uses a function renderPlot() to send a boxplot image to the UI to display using the function plotOutput(). An example in the server function might be: server &lt;- function(input, output) { output$box_plot &lt;- renderPlot({ # R code goes here ggplot(iris, aes(y=Sepal.Length)) + geom_boxplot() }) } Now, we’ve used ggplot() to make our boxplot, and renderPlot() assigns this plot to output$box_plot. The UI uses plotOutput(outputId = &quot;box_plot&quot;) which adds the plot stored in output$box_plot to the app. There are many render* functions that are reactive functions producing reactive output. Remember, the server is where all the hard work goes. The UI just listens to what the server is giving it. A list of render and output functions are found in shiny.rstudio.com lesson 4): render function creates renderDataTable DataTable renderImage images (saved as a link to a source file) renderPlot plots renderPrint any printed output renderTable data frame, matrix, other table like structures renderText character strings renderUI a Shiny tag object or HTML Once the result is rendered, the UI takes this output and uses an *Output function to produce it in the app: output function shows/creates dataTableOutput DataTable htmlOutput raw HTML imageOutput image plotOutput plot tableOutput table textOutput text uiOutput raw HTML verbatimTextOutput text Render functions take one argument (code) wrapped in ({}) such as renderText({&quot;Hello World&quot;}) Output functions take the name of the output object that is the result of a render* function. 3.4 What you’ve learned so far The architecture of shiny apps How ui and server communicate through output and input How ui displays plots (using plotOutput) Adding a control (a selectInput) Connecting that control to our plots using input 3.5 For More Info Dean Attali is, next to Joe Cheng, a real Shiny expert and a great teacher. He has a great course on DataCamp called “Shiny Case Studies” that would be a great next step into learning more about Shiny. "],
["app-2-reactives.html", "4 App 2: Reactives 4.1 Exercise 4.2 For More Info", " 4 App 2: Reactives So we’ve connected our control up. Great! Now let’s add a numeric filter to our data by using an reactive. reactives are the heart and soul of shiny. We’ll use a reactive to filter our data, and pass this filtered data on to our two plots. This means we can dynamically filter our data and our plots will update. A reactive can be thought of a bit of code that runs whenever the controls that map to it are changed. In this case, our reactive represents our filtered dataset when we adjust our slider. Basic workflow of reactives 4.1 Exercise Open up the 02_reactives folder and the app.R file within. Try running the app. You can see that we added a slider (using sliderInput) in ui, but it doesn’t do anything. We’re going to connect that slider to filter the biopics dataset. You might notice that there is a new object in the server code, called biopics_filtered. This is where we’re going to connect our slider. Paste the following bit of code into the reactive, after biopics. What does it do? %&gt;% filter(year_release &gt; input$year_filter) Notice how we call the reactive in output$scatter_plot? We have to use biopics_filtered() rather than biopics_filtered. A reactive is actually a function, and so you need to use the function notation to invoke it in a renderPlot statement. Ok, run the app again and adjust the slider. Notice how the plot axes changes. Congrats, that’s your first use of a reactive! 4.2 For More Info We’ve only shown one type of reactive, basically a reactive data.frame. Almost any type of object can be a reactive. Here are more resources on learning about them. Reactivity 101 (Dean Attali) - Dean Attali’s pages on Shiny are a good read, especially his section on reactives. Reactivity: An Overview (Official Shiny Documentation) - I personally find this overview of reactives a little confusing. "],
["app-3-adding-tooltips-with-plotly.html", "5 App 3: Adding tooltips with plotly 5.1 Exercise 5.2 For More Info", " 5 App 3: Adding tooltips with plotly Tooltips are great for examining single datapoints in the data. We’re going to add tooltips to our scatterplot so that users can hover over a datapoint and see all the other values that go along with a datapoint. There is an easy way to add tooltips to our graphs: use the plotly library. This is a JavaScript (built on top of d3.js) library that makes your ggplots more interactive, with built in tooltips. The plotly library itself relies on d3.js, which is a client-side visualization library. So if you add plotly, does this make your shiny app client-based? Not quite. All of the controls and data serving are still done server-side. It’s only the last bit that is translated to JavaScript and is client-side. Please note that we’re not putting anything on the plotly servers when we do this. All of the data still lives on your server. We’re just using the JavaScript library. 5.1 Exercise Try running the app.R in 03_tooltips_plotly. Mouse over a datapoint. Neat, huh? shiny::runApp(&quot;03_tooltips_plotly&quot;) How did we supply the infomation to the tooltip? Take a look at the aes_string() code. Notice we’re passing in a bunch of dummy variables into aes_string. Do these variables appear in the tooltip? Modify the aes_string() statement to only show 5.2 For More Info The plotly package can instantly make your graphs more interactive using the ggplotly() function. For more info and some recipes, go here: https://plot.ly/ggplot2/ "],
["app-4-adding-in-a-file-loader-observe-and-update-.html", "6 App 4: Adding in a file loader: observe and update. 6.1 Exercise 6.2 More examples", " 6 App 4: Adding in a file loader: observe and update. We’re going to make our file explorer more useful for other files by not hard coding variable names. We’ll take a .csv file as input, and populate our selectInputs with categories that are related to our selected variables. observe/update programming pattern 6.1 Exercise This will be more code review than activity. I apologize. Go through it and you will learn a lot. Open the app.R in 03_observe_update. Try running the following code. What is in categoricalVars and what is in numericVars? Is it what you expected? If you’re confused, please let me know. #since we&#39;re in the shiny_pdx_rlang directory, #we need to set our working directory to 03_observe_update library(fivethirtyeight) library(shiny) library(tidyverse) ##Load in the helper functions source(&quot;04/_observe_update/helper.R&quot;) data(biopics) myDataFrame &lt;- biopics ##these functions return the categorical variables and ##the numeric variables, given a data.frame ##They&#39;re in helper.R ##Try running all the code before ui ##and look at what categoricalVars and numericVars contains categoricalVars &lt;- get_category_variables(myDataFrame) numericVars &lt;- get_numeric_variables(myDataFrame) glimpse(myDataFrame) categoricalVars numericVars Try running the app, and try loading the datasetB.csv file using the file browser (it should be in 03_observe_update). Did the x_variable and y_variable selectInputs change? Let’s add a selectInput to filter on a particular category within our category variable. Uncomment all of the areas that say uncomment this code for step 4 (there are 4 sections). As you do, follow the path from the myData() reactive to the observe code block to the selectInputs in ui.R What is going on? Let’s start with the fileInput in ui.R. Where does input$file1 appear? What do we do with it in the reactive? Now let’s look at the observe codeblock. Is it dependent on a reactive? Where are we calling the reactive? What are we doing in the codeblock? What does the updateSelectInput code do? What are we passing into it? What selectInputs are we modifying? Try running the app again and make sure that it works before moving on. 6.2 More examples The observe demo in the shiny gallery shows another example of observe: https://shiny.rstudio.com/gallery/observer-demo.html "],
["the-finished-app.html", "7 The Finished App 7.1 Extensions", " 7 The Finished App Open up the app in 05_all_together_now and run it. Check to see if you can use different .csv files with it. 7.1 Extensions Now that you have some knowledge of shiny, try extending the app! Change 05_all_together_now to only use a few fivethirtyeight datasets, such as biopics, bechdel and bad_drivers. You’ll have to change the file loader to a select box, and you may want to load the datasets up as a named list. Add a summary view of the incoming data using skimr. "],
["testing-and-debugging-apps.html", "8 Testing and debugging apps 8.1 Debugging your app 8.2 Issues you’ll encounter with interactive programming 8.3 Using print statements to debug your Shiny app 8.4 Using breakpoints to debug 8.5 Testing the UI: shinytest and RSelenium", " 8 Testing and debugging apps 8.1 Debugging your app Debugging is probably one of the most difficult things about an interactive app. You can see certain errors in your console, but they aren’t usually very helpful because these errors aren’t localized to a line number. Instead, you’ll have to use things like print statements and breakpoints to debug your app. More info here: https://shiny.rstudio.com/articles/debugging.html Don’t forget there is a vibrant Shiny user community that you can ask for help! https://shiny.rstudio.com/articles/help.html 8.2 Issues you’ll encounter with interactive programming One of the largest errors you’ll encounter is when your selectInputs, and other input objects don’t correspond to your underlying dataset. For example, you may have the wrong column names in your selectInput, and when you try to do something with that input value, your Shiny app will return an error. Unfortunately, the errors that shiny will return in the browser can be somewhat cryptic. 8.3 Using print statements to debug your Shiny app An elementary form of debugging can be done by using print statements. If you use print statements in a reactive, then you can see whether the inputs that the reactive sees are correct and correspond to your data in the console. 8.4 Using breakpoints to debug Breakpoints are the next level of debugging your Shiny app. By setting breakpoints where you think you are having an issue, you can see the state of objects are at a particular breakpoint. 8.5 Testing the UI: shinytest and RSelenium There are currently two alternatives for testing the UI of the Shiny app: shinytest and RSelenium. "],
["where-next.html", "9 Where Next? 9.1 Programming Resources 9.2 Cool Shiny Enhancements 9.3 Deploying your app 9.4 I want more!", " 9 Where Next? The wide world of shiny is now yours for the taking. I’m compiling a list of resources that I found really useful below. 9.1 Programming Resources The Shiny Gallery - Tons of examples about how to implement things in Shiny. Please note that the examples can be a little too terse. Dean Attali’s Site - his “Advanced Shiny Tips” page has a really useful FAQ. This is usually where I start when I have a question. Advanced Shiny (Dean Attali) - This is the repo for all of Dean’s shiny tips. Plotly - with the plotly package, you can translate ggplots into client-side d3.js plots, which can be customized with a lot more interactivity, and it runs on top of shiny. I’m still learning how to use it, but you can make your interactive graphics very slick with it. 9.2 Cool Shiny Enhancements flexDashboard - Mix Rmarkdown and shiny! Make interactive documents! shinyDashboard - Make a more professional dashboard for your integrated shiny app. Includes alerts, menus, and status updates. shinyLP - Make a landing page for your shiny app. By Jasmine Dumas. shinyjs - Add more JavaScript components to your shiny app. 9.3 Deploying your app You may notice that we’ve run everything on our own machines. What if we want to share our apps? We’ll need to deploy them to a web accessible server. There are two main places you can deploy your Shiny apps. https://shinyapps.io is a more streamlined service, and it lets you push apps to it using the rsconnect package. For more info, go here: http://docs.rstudio.com/shinyapps.io/. The free account gives you 5 free apps and something like 25 hours of access time for free. if you need more service, Rstudio’s new RStudio Connect service: https://www.rstudio.com/products/connect/. Rstudio Connect is more of a complete solution, giving you a web-accessible Rstudio server instance along with a shiny server instance. It costs money. You can also install Shiny Server on something like a DigitalOcean Droplet, or a web-accessible server. Note that if you are non-academic, or need things like user authentication, you’ll need to pay for a license. 9.4 I want more! Look into the world of htmlwidgets: http://www.htmlwidgets.org. Basically, people are trying to bring more visualization frameworks (such as d3.js) to R. Someone may have a htmlwidget that could work for you. "]
]
